ENV_MODE=${ENV_MODE:-dev}
RUNNING_ENV=DOCKER

## logger
RCT_LOG_FILENAME=${RCT_LOG_FILENAME:-reports/rctlogs.txt}
RCT_LOG_FILE_LOGLEV=${RCT_LOG_FILE_LOGLEV:-warn}
RCT_LOG_CONSOLE_LOGLEV=${RCT_LOG_CONSOLE_LOGLEV:-debug}
RCT_LOG_CONSOLE_SYSD=${RCT_LOG_CONSOLE_SYSD:-}

## http server
RCT_HTTP_PORT=${RCT_HTTP_PORT:-8081}
RCT_HOSTNAME=${RCT_HOSTNAME:-localhost}
RCT_TLS_ENABLED=${RCT_TLS_ENABLED:-false}

RCT_JWT_SECRET=${RCT_JWT_SECRET:-secret}
RCT_JWT_EXPIRATION=${RCT_JWT_EXPIRATION:-2h}

## external services connections
RCT_SYNC_TASK_AT_START=${RCT_SYNC_TASK_AT_START:-false}

RCT_CERT_PATH=${RCT_CERT_PATH:-}
ALIMONITOR_PASSPHRASE=${ALIMONITOR_PASSPHRASE:-}
CERN_SOCKS=${CERN_SOCKS:-false}

### endpoints
_DEF_BK_HOST=ali-bookkeeping.cern.ch
_DEF_ML_HOST=alimonitor.cern.ch
_DEF_ML_PROT=https

### bkp
RCT_EP_BK_PROT=https
RCT_EP_BK_HOST=$_DEF_BK_HOST

### bkp runs
RCT_EP_BK_RUNS_PROT=$RCT_EP_BK_PROT
RCT_EP_BK_RUNS_HOST=$_DEF_BK_HOST
RCT_EP_BK_RUNS_PATH=${RCT_EP_BK_RUNS_PATH:-/api/runs?filter[definitions]=PHYSICS}

### bkp lhc fills
RCT_EP_BK_FILLS_PROT=$RCT_EP_BK_PROT
RCT_EP_BK_FILLS_HOST=$_DEF_BK_HOST
RCT_EP_BK_FILLS_PATH=${RCT_EP_FILLS_PATH:-/?page=lhc-fill-details}

### ml data passes
RCT_EP_ML_DP_RAW_PROT=$_DEF_ML_PROT
RCT_EP_ML_DP_RAW_HOST=$_DEF_ML_HOST
RCT_EP_ML_DP_RAW_PATH=${RCT_EP_ML_DP_RAW_PATH:-/production/raw.jsp?res_path=json}


RCT_EP_ML_DP_DET_PROT=$_DEF_ML_PROT
RCT_EP_ML_DP_DET_HOST=${RCT_EP_ML_DP_DET_HOST:-$_DEF_ML_HOST}
RCT_EP_ML_DP_DET_PATH=${RCT_EP_ML_DP_DET_PATH:-/raw/raw_details.jsp?timesel=0&res_path=json}


### simulation passes
RCT_EP_ML_MC_RAW_PROT=$_DEF_ML_PROT
RCT_EP_ML_MC_RAW_HOST=${RCT_EP_ML_MC_RAW_HOST:-$_DEF_ML_HOST}
RCT_EP_ML_MC_RAW_PATH=${RCT_EP_ML_MC_RAW_PATH:-/MC/?res_path=json}

RCT_EP_ML_MC_DET_PROT=$_DEF_ML_PROT
RCT_EP_ML_MC_DET_HOST=${RCT_EP_ML_MC_DET_HOST:-$_DEF_ML_HOST}
RCT_EP_ML_MC_DET_PATH=${RCT_EP_ML_MC_DET_PATH:-/job_events.jsp?timesel=0&res_path=json}

RCT_EP_ML_MC_TAG_PROT=$_DEF_ML_PROT
RCT_EP_ML_MC_TAG_HOST=${RCT_EP_ML_MC_TAG_HOST:-$_DEF_ML_HOST}
RCT_EP_ML_MC_TAG_PATH=${RCT_EP_ML_MC_TAG_PATH:-/MC/prodDetails.jsp?res_path=json}


## openid
RCT_OPENID_ID=${RCT_OPENID_ID:-}
RCT_OPENID_SECRET=${RCT_OPENID_SECRET:-}
RCT_OPENID_REDIRECT=${RCT_OPENID_REDIRECT:-}
RCT_OPENID_WELL_KNOWN=${RCT_OPENID_WELL_KNOWN:-}


## database configuration
### common vars
RCT_DB_HOST=${RCT_DB_HOST:-${DB_CONTAINER_NAME:-o2rct_database-dev}}
RCT_DB_UNIXSS=${RCT_DB_UNIXSS:-/var/run/postgresql}
RCT_DB_NAME=${RCT_DB_NAME:-rct-db}
RCT_DB_PORT=${RCT_DB_PORT:-5432}
RCT_DB_USERNAME=${RCT_DB_USERNAME:-rct-user}
RCT_DB_PASSWORD=${RCT_DB_PASSWORD:-rct-passwd}

### docker container conf
POSTGRES_PASSWORD=${POSTGRES_PASSWORD:-postgres}
POSTGRES_USER=${POSTGRES_USER:-postgres}
POSTGRES_DB=${POSTGRES_DB:-postgres}
PGDATA=${PGDATA:-/var/lib/postgresql/data/pgdata}
PGPORT=$RCT_DB_PORT
POSTGRES_HOST_AUTH_METHOD=scram-sha-256

MOCK_DB=${MOCK_DB:-false}
OTHER_SQL_MODIFY_DAEMON=${OTHER_SQL_MODIFY_DAEMON:-true}
MAIN_SQL_MODIFY_DAEMON=${MAIN_SQL_MODIFY_DAEMON:-true}

### cache
RCT_DEV_USE_CACHE=${RCT_DEV_USE_CACHE:-true}
RCT_DEV_USE_CACHE_INSTEAD=${RCT_DEV_USE_CACHE_INSTEAD:-true}
RCT_DEV_OMIT_WHEN_CACHED=${RCT_DEV_OMIT_WHEN_CACHED:-false}
